<!DOCTYPE html>
<html>

<head>
    <title>Welcome to Genergetic</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="stylesheets/style.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src="animation.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
</head>

<body>


    <script>
        /*  var requestOptions = {                                                                                                                                                                                                                                 method: 'GET',
                                                                                                                                                                                                                                                                                                                                            redirect: 'follow'
                                                                                                                                                                                                                                                                                                                                        };

                                                                                                                                                                                                                                                                                                                                        fetch(" https://genergetic.us-south.cf.appdomain.cloud/readings/b827ebbade18&status", requestOptions)
                                                                                                                                                                                                                                                                                                                                            .then(response => response.text())
                                                                                                                                                                                                                                                                                                                                            //.then(result => console.log(result))
                                                                                                                                                                                                                                                                                                                                            .catch(error => console.log('error', error));
                                                                                                                                                                                                                                                                                                                                        console.log("%s %o", JSON.stringify(result['result']));
                                                                                                                                                                                                                                                                                                                                    */

        var time_Rp = {
            "async": true,
            "crossDomain": true,
            "url": " https://genergetic.us-south.cf.appdomain.cloud/readings/kevmacpro&status",
            "method": "GET"
        }

        $.ajax(time_Rp).done(function(response) {
                    console.log(response.readings);


                    document.getElementById("demo").innerHTML = response.readings[0].timestamp;

                    document.getElementById("power").innerHTML = response.readings[0].power;




                    // Visualization API with the 'corechart' package.
                    google.charts.load('visualization', {
                        packages: ['corechart']
                    });
                    google.charts.setOnLoadCallback(drawLineChart);

                    function drawLineChart() {
                        $.ajax({
                            url: "https://www.encodedna.com/library/sample-sales.json",
                            dataType: "json",
                            type: "GET",
                            contentType: "application/json; charset=utf-8",
                            success: function(data) {
                                var arrSales = [
                                    ['Month', 'Sales Figure', 'Perc. (%)']
                                ]; // Define an array and assign columns for the chart.

                                // Loop through each data and populate the array.
                                $.each(data, function(index, value) {
                                    arrSales.push([value.Month, value.Sales_Figure, value.Perc]);
                                });

                                // Set chart Options.
                                var options = {
                                    title: 'Monthly Sales',
                                    curveType: 'function',
                                    legend: {
                                        position: 'bottom',
                                        textStyle: {
                                            color: '#555',
                                            fontSize: 14
                                        }
                                    } // You can position the legend on 'top' or at the 'bottom'.
                                };

                                // Create DataTable and add the array to it.
                                var figures = google.visualization.arrayToDataTable(arrSales)

                                // Define the chart type (LineChart) and the container (a DIV in our case).
                                var chart = new google.visualization.LineChart(document.getElementById('chart'));
                                chart.draw(figures, options); // Draw the chart with Options.
                            },
                            error: function(XMLHttpRequest, textStatus, errorThrown) {
                                alert('Got an Error');
                            }
                        });
    </script>


    });
    </script>

    <div style="padding-left: 10%; padding-right: 10%; margin-left: 20%; margin-right: 20%;">
        <h1 style="text-align: center;"><b>Welcome to Genergetic </b></h1>
        <button class="collapsible">
      <div class="row">
      <div class="column">
      Device 1 
      </div>
        <div class="column">
          <img class="newappIcon" src="images/img_1.jpg">
        </div>
    
    </div>
    </button>
        <div class="content">
            <h3>Current Readings </h3>
            <br>
            <h4><b>Voltage</b>: 20 </h4>
            <h4 id="current_reading_1"><b>Time since last turned on</b>
                <p id="demo"></p>


            </h4>

            <label for="disk_c"><h4><b>Total power utilizations</b> <p id="power"></p></h4></label>
            <meter id="disk_c" value=".4" low="0.2" optimum="-.5" style="margin">4</meter><br>

            <div id="test">
                <button id="Device_1" style="margin-bottom: 5%" class="float-left submit-button">Go back</button>

            </div>
            <script type="text/javascript">
                document.getElementById("Device_1").onclick = function() {
                    location.href = "index.html";
                };
            </script>
        </div>


        <div id="chart" style="width:auto; height:300px;"></div>
</body>

</html>
