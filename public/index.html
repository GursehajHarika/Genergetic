<!DOCTYPE html>
<html>

<head>
    <title>Genergetic</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="stylesheets/style.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

</head>

<body>


    <script>
        var time_Rp = {
            "async": true,
            "crossDomain": true,
            "url": newlink_1,
            "method": "GET"
        }
        $.ajax(time_Rp).done(function(response) {
                    console.log(response.readings);
                    var d = new Date(0); // The 0 there is the key, which sets the date to the epoch
                    d.setUTCSeconds(response.readings[0].timestamp);
                    document.getElementById("demo").innerHTML = d;
                    document.getElementById("power").innerHTML = response.readings[0].power;

                    //Information about the device 1
                    var device_name = {
                        "async": true,
                        "crossDomain": true,
                        "url": "https://genergetic.us-south.cf.appdomain.cloud/devices",
                        "method": "GET"
                    }
                    $.ajax(device_name).done(function(response) {
                        console.log(response.results.length);
                        var a = 0;
                        document.getElementById("name_1").innerHTML = response.results[0].typeId;
                        var name_1 = response.results[0].deviceId;
                        var newlink_1 = "https://genergetic.us-south.cf.appdomain.cloud/readings/" + name_1 + "&status"

                    });

                    //Information about the device 2
                    var device_2 = {
                        "async": true,
                        "crossDomain": true,
                        "url": "https://genergetic.us-south.cf.appdomain.cloud/devices",
                        "method": "GET"
                    }

                    $.ajax(device_2).done(function(response) {
                        console.log(response.results.length);
                        var a = 0;
                        document.getElementById("name").innerHTML = response.results[1].typeId;


                    });

                    var time_Rp = {
                        "async": true,
                        "crossDomain": true,
                        "url": newlink_1,
                        "method": "GET"
                    }
                    $.ajax(time_Rp).done(function(response) {
                        console.log(response.readings);
                        var d = new Date(0);
                        d.setUTCSeconds(response.readings[0].timestamp);
                        document.getElementById("demo").innerHTML = d;
                        document.getElementById("power").innerHTML = response.readings[0].power;


                    });
    </script>

    <div style="padding-left: 10%; padding-right: 10%; margin-left: 20%; margin-right: 20%;">
        <h1 style="text-align: center;"><b>Welcome to Genergetic </b></h1>
        <button class="collapsible">
      <div class="row">
      <div class="column" style="text-align: center;">
        <script>
        
  
          </script>
       <h3 id = "name_1">Device 1</h3> </div>
        <div class="column">
          <img class="newappIcon" src="images/img_1.jpg">
        </div>
    
    </div>
    </button>
        <div class="content">
            <h3>Current Readings </h3>
            <br>
            <h4><b>Voltage</b>: 20 </h4>
            <h4 id="current_reading_1"><b>Time since last turned on</b>
                <p id="demo"></p>

            </h4>

            <label for="disk_c"><h4><b>Total power utilizations</b> <p id="power"></p></h4></label>
            <meter id="disk_c" value=".4" low="0.2" optimum="-.5" style="margin">4</meter><br>

            <div id="test">
                <button id="Device_1" style="margin-bottom: 5%" class="float-left submit-button">Learn More</button>

            </div>
            <script type="text/javascript">
                document.getElementById("Device_1").onclick = function() {
                    location.href = "Device_1.html";
                };
            </script>
        </div>

        <button class="collapsible">
          <div class="row">
          <div class="column" style="text-align: center;">
            <script>
           
              </script>
           <h3 id = "name">Device 2</h3>  
          </div>
            <div class="column">
              <img class="newappIcon" src="images/img_2.jpg">
            </div>
        
        </div>
        </button>
        <div class="content">
            <h3>Current Readings </h3>
            <br>
            <h4><b>Voltage</b>: 20 </h4>
            <h4><b>Time since last turned on</b>: 5 </h4>
            <label for="disk_d">
          <h4><b>Total power utilizations</b>: 20 </h4></label>
            <meter id="disk_d" value="0.9" low=".25" optimum=".5">90%</meter>


            <div id="test">
                <button id="Device_2" style="margin-bottom: 5%;" class="float-left submit-button">Learn More</button>

            </div>
            <script type="text/javascript">
                document.getElementById("Device_2").onclick = function() {
                    location.href = "homepage.html";
                };
            </script>
        </div>


        <script>
            var coll = document.getElementsByClassName("collapsible");
            var i;

            for (i = 0; i < coll.length; i++) {
                coll[i].addEventListener("click", function() {
                    this.classList.toggle("active");
                    var content = this.nextElementSibling;
                    if (content.style.maxHeight) {
                        content.style.maxHeight = null;
                    } else {
                        content.style.maxHeight = content.scrollHeight + "px";
                    }
                });
            }
        </script>
    </div>
</body>

</html>
